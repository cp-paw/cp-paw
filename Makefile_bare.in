#
SHELL=/bin/sh
#
#########################################################################
##                                                                     ##
##  make a paw executable and a paw library using gmake                ##
##  ===================================================                ##
##                                                                     ##
#########################################################################
##                                                                     ##
##  Primary targets:                                                   ##
##                                                                     ##
##  directory structure                                                ##
##    @THISDIR@/bin/@ARCH@       executables                            ##
##    @THISDIR@/bin/@ARCH@/none  objects with simple compiler flags     ##
##    @THISDIR@/bin/@ARCH@/fast  optimized objects                      ##
##    @THISDIR@/bin/@ARCH@/prof  objects for profiling                  ##
##    @THISDIR@/bin/@ARCH@/dbg   objects for debugging                  ##
##    @THISDIR@/src              sources for CP-PAW main code           ##
##    @THISDIR@/src/Tools        directory containing Tools             ##
##    @THISDIR@/src/Buildtools/F90PP directory preprocessor etc         ##
##                                                                     ##
#########################################################################
## The following block of variables is set by the configure            ##
## script (AC_SUBST @...@ and sed-Commands var...)                     ##
#########################################################################
#
#___________________________ the hardware architecture
export ARCH=@ARCH@
#___________________________ root directory of the PAW distribution
export THISDIR=@THISDIR@
#___________________________ object type (none,fast,dbg,prof)
export OBJTYPE=varOBJTYPE
#___________________________ path to the source files
export SRCDIR=${THISDIR}/src
#___________________________ path to the object files
export OBJDIR=${THISDIR}/bin/${ARCH}/Objects/${OBJTYPE}
#___________________________ path to the binaries
export BINDIR=${THISDIR}/bin/${ARCH}
#___________________________ path to the tool-directory
export TOOLDIR=${THISDIR}/src/Tools
#___________________________ directory with blas library
export BLASDIR=@BLASDIR@
#___________________________ directory with lapack library
export LAPACKDIR=@LAPACKDIR@
#___________________________ directory with fft library
export FFTDIR=@FFTDIR@
#___________________________ directory with MPI library
export MPIDIR=@MPIDIR@
#___________________________header file for fft
export FFT_HEADER=@FFT_HEADER@
#___________________________header file for MPI
export MPI_HEADER=@MPI_HEADER@
#___________________________special treatment
export SPECIAL=@SPECIAL@
#___________________________ set to T, if this is Makefile.parallel
export PARALLEL=varPARALLEL
#___________________________ Fortran90 compiler + compiler flags
ifeq (${PARALLEL},T)
  export COMPILE=@COMPILE_PARALLEL@
  export LINK=@LINK_PARALLEL@
  export LIBS=@LIBS_PARALLEL@
  export F90PP=${BINDIR}/f90pp @CPPFLAGS@ -DCPPVARIABLE_PARALLEL
else
  export COMPILE=@COMPILE_SCALAR@
  export LINK=@LINK_SCALAR@
  export LIBS=@LIBS_SCALAR@
  export F90PP=${BINDIR}/f90pp @CPPFLAGS@
endif
#___________________________ the PAW-binary (inclusive path)
export PAWX=@PAWX@
#___________________________ the extension of files to be compiled
export FEXT=@FEXT@
#___________________________ the GNU make utility
export MAKE=@MAKE@
#
##########################################################################
##  define parameters                                                   ##
##########################################################################
ifeq (${PARALLEL},T)   #select parallel versus scalar paw_mpelib.f90
  export MODE=_p
else
  export MODE=_s
endif
ifeq (${SPECIAL},IBM)
  export POE_PREFIX=poe
  export POE_SUFFIX=-proc 1 -nodes 1 -rmpool 0
else
  export POE_PREFIX=
  export POE_SUFFIX=
endif
#
# out of the file src/paw_mpelib.f a parallel _p and
# a sequential _s version are produced
#
export MPE = ${OBJDIR}/paw_mpelib$(MODE).o
#
##########################################################################
##  include files                                                       ##
##########################################################################
#
# fftw_f77.i is an include file for the FFTW-library
# in case FFTW is linked, this file has to be copied into the
# object directory
#
ifneq ($(strip ${FFT_HEADER}),)
  # copy includefile into object directory.
  # new name is uppercase to allow global uppercasing of fortran code
  FFTWINCLUDE=cp ${FFT_HEADER} ${OBJDIR}/fftw_f77.i
else
  # not there, just create an empty file
  FFTWINCLUDE= touch ${OBJDIR}/fftw_f77.i
endif
#
# mpif.h is an include file for the MPICH-library
# for parallel compilation, this file has to be copied into
# the object directory. Not needed for IBM environment
# the include file is usually named mpif.f90
#
ifeq (${PARALLEL},T)   #select parallel versus scalar paw_mpelib.f90
  ifneq ($(strip ${MPI_HEADER}),)
    # copy includefile into object directory
    MPIINCLUDE=cp ${MPI_HEADER} ${OBJDIR}/mpif.h
  else
    # not there, just create an empty file
    MPIINCLUDE= touch ${OBJDIR}/mpif.h
  endif
else
  # not needed, just create an empty file to fool dependencies
  MPIINCLUDE= touch ${OBJDIR}/mpif.h
endif
#
# paw_mpelib.f holds the subroutines necessary for parallel execution
# of the code. Via preprocessor variables, this source is split up into
# two files, one for parallel and one for sequential execution. ($MODE is
# defined in the if-statement above)
# libpaw.a holds the object files and can be linked to any code which
# needs a PAW subroutine (leave the # after libpaw.a)
# MPE   = ${OBJDIR}/paw_mpelib$(MODE).o
export PAWLIB= ${OBJDIR}/libpaw.a#
export PAWLIBFULL= ${OBJDIR}/libpawfull.a#
#
#########################################################################
## Definition of the targets                                           ##
#########################################################################
default: ${PAWX}
#
clean:
	find ${OBJDIR}/* -maxdepth 0 \! -name Makefile -exec rm {} \;
	rm -f ${PAWX}
	rm -rf ${BINDIR}/*_tests
#
##########################################################################
##  define object files kept in the library                             ##
##########################################################################
#
export LOBJSF77 = \
	 ${OBJDIR}/slatec.o
export LOBJS = \
        ${OBJDIR}/paw_trace.o \
        ${OBJDIR}/paw_error.o \
        ${OBJDIR}/paw_filehandler.o \
        ${OBJDIR}/paw_clock.o \
        ${OBJDIR}/paw_lock.o \
        ${OBJDIR}/paw_timing.o \
        ${OBJDIR}/paw_linkedlist.o \
        ${OBJDIR}/paw_strings.o \
        ${OBJDIR}/paw_dft.o \
        ${OBJDIR}/paw_dftaddendum.o \
        ${OBJDIR}/paw_constants.o \
        ${OBJDIR}/paw_spherical.o \
        ${OBJDIR}/paw_generalpurpose.o \
        ${OBJDIR}/paw_report.o \
        ${OBJDIR}/paw_periodictable.o \
        ${OBJDIR}/paw_radial.o \
        ${OBJDIR}/paw_schroedinger.o \
        ${OBJDIR}/paw_atomlib.o \
        ${OBJDIR}/paw_specialfunctions.o \
        ${OBJDIR}/paw_usage.o \
        ${OBJDIR}/paw_selftest.o \
        ${OBJDIR}/paw_strcio.o \
        ${OBJDIR}/paw_cell.o \
        ${OBJDIR}/paw_pdos.o \
        ${OBJDIR}/paw_library.o \
        ${OBJDIR}/paw_polynom.o \
        ${OBJDIR}/paw_dimer.o  \
        ${OBJDIR}/paw_lmtobasics.o \
        ${OBJDIR}/paw_debug.o \
        ${OBJDIR}/paw_brillouin.o \
        ${OBJDIR}/paw_gaussian.o 
#
##########################################################################
##  define other objects                                                ##
##########################################################################
#
OBJECTS1 = \
	    ${OBJDIR}/paw_driver.o \
           ${OBJDIR}/paw_thermostat.o \
           ${OBJDIR}/paw_isolate.o \
           ${OBJDIR}/paw_assist.o \
           ${OBJDIR}/paw_ldaplusu.o \
           ${OBJDIR}/paw_lists.o \
           ${OBJDIR}/paw_constraints.o \
           ${OBJDIR}/paw_lmto.o \
           ${OBJDIR}/paw_dmft.o \
           ${OBJDIR}/paw_fft.o 
#
OBJECTS2 = \
           ${OBJDIR}/paw_augmentation.o \
           ${OBJDIR}/paw_softcore.o \
           ${OBJDIR}/paw_classical.o \
           ${OBJDIR}/paw_forcefield.o \
           ${OBJDIR}/paw_atoms.o \
           ${OBJDIR}/paw.o \
           ${OBJDIR}/paw_efg.o \
           ${OBJDIR}/paw_ioroutines.o \
           ${OBJDIR}/paw_iotra.o \
           ${OBJDIR}/paw_ionew.o \
           ${OBJDIR}/paw_qmmm.o \
           ${OBJDIR}/paw_cosmo.o \
           ${OBJDIR}/paw_warmup.o \
           ${OBJDIR}/paw_optfric.o
#  the following is for the QMMM of Woo and Margl
#          ${OBJDIR}/mm_paw_modules.o \
#          ${OBJDIR}/mm_paw_core_mm.o \
#          ${OBJDIR}/mm_paw_interface.o
#          ${OBJDIR}/paw_md
#
OBJECTS3 = \
           ${OBJDIR}/paw_setups.o \
           ${OBJDIR}/paw_setupread.o \
           ${OBJDIR}/paw_potential.o \
           ${OBJDIR}/paw_occupations.o \
           ${OBJDIR}/paw_pairpotential.o \
           ${OBJDIR}/paw_graphics.o \
           ${OBJDIR}/paw_waves1.o \
           ${OBJDIR}/paw_waves2.o \
           ${OBJDIR}/paw_mixer.o \
           ${OBJDIR}/paw_cg.o \
           ${OBJDIR}/paw_kpoints.o \
           ${OBJDIR}/paw_vext.o \
           ${OBJDIR}/paw_vdw.o \
           ${OBJDIR}/paw_ci.o \
           ${OBJDIR}/paw_opteels.o \
#           ${OBJDIR}/paw_localize.o  #removed
#           ${OBJDIR}/paw_pdos.o  #into library
#          ${OBJDIR}/paw_optic.o \   # removed
#
export OBJECTS= ${OBJECTS1} ${OBJECTS2} ${OBJECTS3}
#
# Object for version information
export OBJVERSION = \
	      ${OBJDIR}/paw_version.o
#
# Object for source blob
export SRCBLOB = \
	   ${OBJDIR}/paw_srcblob.o
#
#
#
# Definition of objects for the compilation of the PAW-tools
#
# Objects for test code
OBJMURNAGHAN = \
          ${OBJDIR}/paw_murnaghan.o
OBJSTPA = \
          ${OBJDIR}/paw_stpa.o
OBJSTPREPORT = \
          ${OBJDIR}/paw_stpreport.o
OBJLATTICE = \
          ${OBJDIR}/paw_lattice.o
OBJTEST = \
          ${OBJDIR}/paw_oneatom.o \
          ${OBJDIR}/paw_test.o \
          ${OBJDIR}/paw_testlib.o

# Objects for atomic setup tool
OBJNEWATOM = \
          ${OBJDIR}/paw_newatom.o
# Objects for atomic setup tool
OBJATOM = \
          ${OBJDIR}/paw_diffgl.o \
          ${OBJDIR}/paw_oldradial.o \
          ${OBJDIR}/paw_atom.o
# Objects for paw_tra.x
OBJTRA =  \
          ${OBJDIR}/paw_tra.o
# Objects for paw_wave.x
OBJWAVE=  \
          ${OBJDIR}/paw_wave.o
# Objects for paw_1davpot.x
OBJ1DAVPOT=  \
          ${OBJDIR}/paw_1davpot.o
# Objects for paw_cmcwave.x
OBJCMCWAVE=  \
          ${OBJDIR}/paw_cmcwave.o
# Objects for paw_grab.x
OBJGRAB=  \
          ${OBJDIR}/paw_grab.o
# Objects for paw_dos.x
OBJDOS=  \
          ${OBJDIR}/paw_dos.o
# Objects for paw_bands.x
OBJBANDS=  \
          ${OBJDIR}/paw_bands.o
# Objects for paw_preopt.x
OBJPRE=  \
          ${OBJDIR}/paw_preopt.o
# Objects for paw_converttra.x
OBJCONVERTTRA=  \
          ${OBJDIR}/paw_converttra.o
# Objects for paw_cleantra.x
OBJCLEANTRA=  \
          ${OBJDIR}/paw_cleantra.o
# Objects for paw_strc.x
OBJSTRC=  \
          ${OBJDIR}/paw_strc.o
# Objects for paw_toxyz.x
OBJTOXYZ=  \
          ${OBJDIR}/paw_toxyz.o
# Objects for paw_tostrc.x
OBJTOSTRC=  \
          ${OBJDIR}/paw_tostrc.o
# Objects for paw_tostrc.x
OBJPOLYHEDRA=  \
          ${OBJDIR}/paw_polyhedra.o


#########################################################################
##  create preprocessor                                                ##
#########################################################################
f90pp: ${BINDIR}/f90pp_tmplts.x  ${OBJDIR}/version_writeparmfile.o
${BINDIR}/f90pp_tmplts.x: ${SRCDIR}/Buildtools/F90PP/f90pp_tmplts.f90
	${F90PP} -notemplates ${SRCDIR}/Buildtools/F90PP/f90pp_tmplts.f90 > ${OBJDIR}/f90pp_tmplts_d.${FEXT}
	${COMPILE} -o ${OBJDIR}/f90pp_tmplts.o ${OBJDIR}/f90pp_tmplts_d.${FEXT}
	${LINK} -o ${BINDIR}/f90pp_tmplts.x ${OBJDIR}/f90pp_tmplts.o ${LIBS}

${OBJDIR}/version_writeparmfile.o: ${BINDIR}/parmfilewriter.x
	cat ${THISDIR}/parms.in_use | ${POE_PREFIX} ${BINDIR}/parmfilewriter.x ${POE_SUFFIX} >  ${OBJDIR}/version_writeparmfile.${FEXT}
	${F90PP} -notemplates ${OBJDIR}/version_writeparmfile.${FEXT}> ${OBJDIR}/version_writeparmfile_d.${FEXT}
	${COMPILE} -o ${OBJDIR}/version_writeparmfile.o ${OBJDIR}/version_writeparmfile_d.${FEXT}

${BINDIR}/parmfilewriter.x: ${SRCDIR}/Buildtools/F90PP/parmfilewriter.f90
	${F90PP} -notemplates ${SRCDIR}/Buildtools/F90PP/parmfilewriter.f90 > ${OBJDIR}/parmfilewriter_d.${FEXT}
	${COMPILE} -o ${OBJDIR}/parmfilewriter.o ${OBJDIR}/parmfilewriter_d.${FEXT}
	${LINK} -o ${BINDIR}/parmfilewriter.x ${OBJDIR}/parmfilewriter.o ${LIBS}
#
#########################################################################
##  link files and produce executable PAWX                             ##
#########################################################################
#
${PAWX} : ${SRCBLOB} f90pp ${OBJDIR}/fftw_f77.i ${OBJDIR}/mpif.h ${LOBJS} ${LOBJSF77} \
                ${OBJDIR}/version_writeparmfile.o \
                ${OBJVERSION} ${OBJECTS} ${MPE}
	${LINK} -o ${PAWX} ${OBJECTS} ${OBJVERSION} ${SRCBLOB} ${LOBJS} ${LOBJSF77} ${OBJDIR}/version_writeparmfile.o ${MPE} ${LIBS}
#
#########################################################################
##  build paw library                                                  ##
#########################################################################
${PAWLIB}: ${LOBJS} ${LOBJSF77} ${MPE} ${OBJDIR}/version_writeparmfile.o
	ar -rus $(PAWLIB) $(LOBJS) $(LOBJSF77) ${OBJDIR}/paw_mpelib_s.o ${OBJDIR}/version_writeparmfile.o
#
#########################################################################
##  build full paw library and optionally exclude objects              ##
##  this target can be used to create a library of all objects         ##
##  additionally on can exclude objects using the EXCLUDE parameter    ##
##  for example: make libfull EXCLUDE="paw_classical.o paw_setups.o"   ##
##  The object paw.o will allways be excluded, because it contains a   ##
##  main program.                                                      ##
##  This library can then be linked to a main program, like libpaw.a   ##
#########################################################################
${PAWLIBFULL}: ${OBJECTS} $(OBJVERSION) ${SRCBLOB} ${LOBJS} ${LOBJSF77} ${MPE} ${OBJDIR}/version_writeparmfile.o
	ar -rus $(PAWLIBFULL) ${OBJECTS} ${OBJVERSION} ${SRCBLOB} $(LOBJS) $(LOBJSF77) ${OBJDIR}/paw_mpelib_s.o ${OBJDIR}/version_writeparmfile.o
	ar -dv ${PAWLIBFULL} paw.o
	for EX in ${EXCLUDE}; do ar -dv ${PAWLIBFULL} $$EX;done
#
#########################################################################
##  build Tools                                                        ##
#########################################################################
#
${BINDIR}/paw_murnaghan.x: ${OBJMURNAGHAN} 
	${LINK} -o ${BINDIR}/paw_murnaghan.x ${OBJMURNAGHAN} 
#
clean_murnaghan:
	rm -f ${OBJMURNAGHAN} ${BINDIR}/paw_murnaghan.x
#
${BINDIR}/paw_stpreport.x: ${OBJSTPREPORT} ${PAWLIB} ${BINDIR}/paw_stpa.x
	${LINK} -o ${BINDIR}/paw_stpreport.x ${OBJSTPREPORT} -L${OBJDIR} -lpaw ${LIBS}
#
clean_stpreport:
	rm -f ${OBJSTPREPORT} ${BINDIR}/paw_stpreport.x
#
${BINDIR}/paw_stpa.x: ${OBJSTPA} ${PAWLIB} 
	${LINK} -o ${BINDIR}/paw_stpa.x ${OBJSTPA} -L${OBJDIR} -lpaw ${LIBS}
#
clean_stpa:
	rm -f ${OBJSTPA} ${BINDIR}/paw_stpa.x
#
${BINDIR}/paw_test.x: ${OBJTEST} ${PAWLIB} 
	${LINK} -o ${BINDIR}/paw_test.x ${OBJTEST} -L${OBJDIR} -lpaw ${LIBS}
#
clean_test:
	rm -f ${OBJTEST} ${BINDIR}/paw_test.x
#
${BINDIR}/paw_lattice.x: ${OBJLATTICE} ${PAWLIB} ${OBJDIR}/paw_setupread.o
	${LINK} -o ${BINDIR}/paw_lattice.x ${OBJLATTICE} ${OBJDIR}/paw_setupread.o -L${OBJDIR} -lpaw ${LIBS}
#
clean_lattice:
	rm -f ${OBJLATTICE} ${BINDIR}/paw_lattice.x
#
${BINDIR}/paw_newatom.x: ${OBJNEWATOM} ${PAWLIB} ${OBJDIR}/paw_setupread.o
	${LINK} -o ${BINDIR}/paw_newatom.x ${OBJNEWATOM} ${OBJDIR}/paw_setupread.o -L${OBJDIR} -lpaw ${LIBS}
#
clean_newatom:
	rm -f ${OBJNEWATOM} ${BINDIR}/paw_newatom.x
#
${BINDIR}/paw_atom.x: ${OBJATOM} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_atom.x ${OBJATOM} -lpaw ${LIBS}
#
clean_atom:
	rm -f ${OBJATOM}; rm -f ${BINDIR}/paw_atom.x
#
${BINDIR}/paw_tra.x: ${OBJTRA} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_tra.x ${OBJTRA} ${OBJDIR}/paw_forcefield.o ${OBJDIR}/paw_classical.o -L${OBJDIR} -lpaw ${LIBS}
#
clean_tra:
	rm -f ${OBJTRA}; rm -f ${BINDIR}/paw_tra.x
#
${BINDIR}/paw_wave.x: ${OBJWAVE} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_wave.x ${OBJWAVE} -L${OBJDIR} -lpaw ${LIBS}
#
clean_wave:
	rm -f ${OBJWAVE}; rm -f ${BINDIR}/paw_wave.x
#
${BINDIR}/paw_1davpot.x: ${OBJ1DAVPOT} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_1davpot.x ${OBJ1DAVPOT} -L${OBJDIR} -lpaw ${LIBS}
#
clean_1davpot:
	rm -f ${OBJ1DAVPOT}; rm -f ${BINDIR}/paw_1davpot.x
#
${BINDIR}/paw_cmcwave.x: ${OBJCMCWAVE} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_cmcwave.x ${OBJCMCWAVE} -L${OBJDIR}  -lpaw ${LIBS}
#
clean_cmcwave:
	rm -f ${OBJCMCWAVE}; rm -f ${BINDIR}/paw_cmcwave.x
#
${BINDIR}/paw_grab.x: ${OBJGRAB} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_grab.x ${OBJGRAB} -L${OBJDIR}  -lpaw ${LIBS}
#
clean_grab:
	rm -f ${OBJGRAB}; rm -f ${BINDIR}/paw_grab.x
#
${BINDIR}/paw_dos.x: ${OBJDOS} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_dos.x ${OBJDOS} -L${OBJDIR}  -lpaw ${LIBS}
#
clean_dos:
	rm -f ${OBJDOS}; rm -f ${BINDIR}/paw_dos.x
#
${BINDIR}/paw_bands.x: ${OBJBANDS} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_bands.x ${OBJBANDS} -L${OBJDIR}  -lpaw ${LIBS}
#
clean_bands:
	rm -f ${OBJBANDS}; rm -f ${BINDIR}/paw_bands.x
#
${BINDIR}/paw_preopt.x: ${OBJPRE} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_preopt.x ${OBJPRE}  ${OBJDIR}/paw_forcefield.o ${OBJDIR}/paw_classical.o -L${OBJDIR}  -lpaw ${LIBS}
#
clean_preopt:
	rm -f ${OBJPRE}; rm -f ${BINDIR}/paw_preopt.x
#
${BINDIR}/paw_converttra.x: ${OBJCONVERTTRA} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_converttra.x ${OBJCONVERTTRA} -L${OBJDIR}  -lpaw ${LIBS}
#
clean_converttra:
	rm -f ${OBJCONVERTTRA}; rm -f ${BINDIR}/paw_converttra.x
#
${BINDIR}/paw_cleantra.x: ${OBJCLEANTRA} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_cleantra.x ${OBJCLEANTRA} -L${OBJDIR}  -lpaw ${LIBS}
#
clean_cleantra:
	rm -f ${OBJCLEANTRA}; rm -f ${BINDIR}/paw_cleantra.x
#
${BINDIR}/paw_strc.x: ${OBJSTRC} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_strc.x ${OBJSTRC} -L${OBJDIR} -lpaw ${LIBS}
#
clean_strc:
	rm -f ${OBJSTRC}; rm -f ${BINDIR}/paw_strc.x
#
${BINDIR}/paw_toxyz.x: ${OBJTOXYZ} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_toxyz.x ${OBJTOXYZ} -L${OBJDIR} -lpaw ${LIBS}
#
clean_toxyz:
	rm -f ${OBJTOXYZ}; rm -f ${BINDIR}/paw_toxyz.x
#
${BINDIR}/paw_tostrc.x: ${OBJTOSTRC} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_tostrc.x ${OBJTOSTRC} -L${OBJDIR} -lpaw ${LIBS}
#
clean_tostrc:
	rm -f ${OBJTOSTRC}; rm -f ${BINDIR}/paw_tostrc.x
#
${BINDIR}/paw_polyhedra.x: ${OBJPOLYHEDRA} ${PAWLIB}
	${LINK} -o ${BINDIR}/paw_polyhedra.x ${OBJPOLYHEDRA} -L${OBJDIR} -lpaw ${LIBS}
#
clean_polyhedra:
	rm -f ${OBJPOLYHEDRA}; rm -f ${BINDIR}/paw_polyhedra.x
#
# copy include files if necessary (controlled by if-statements above)
#
${OBJDIR}/fftw_f77.i:
	${FFTWINCLUDE}
#
${OBJDIR}/mpif.h:
	${MPIINCLUDE}
#
#########################################################################
##  execute tests                                                      ##
#########################################################################
#
tests: ${PAWX} varOBJTYPE_tests
varOBJTYPE_tests: ${PAWX} 
	rm -rf ${BINDIR}/varOBJTYPE_tests;cp -r ${THISDIR}/tests ${BINDIR}/varOBJTYPE_tests;cd ${BINDIR}/varOBJTYPE_tests;${MAKE} all
#
#${OBJDIR}/mm_paw_f77.o
#########################################################################
##  compile code files independent of parameter                        ##
##  and place the objects in OBJDIR                                    ##
#########################################################################
.PHONY: ${OBJVERSION} ${SRCBLOB}
#
#__special rule for parallel interface because of preprocessor___________
${MPE} : ${OBJDIR}/%$(MODE).o: ${SRCDIR}/%.f90 ${OBJDIR}/mpif.h
	${F90PP} $< >${OBJDIR}/$*$(MODE)_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*$(MODE)_d.${FEXT}
#
# generate version information __________________________________________
$(OBJVERSION): ${OBJDIR}/%.o: ${SRCDIR}/%.f90 
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	sh ${SRCDIR}/Buildtools/Version/getversion.sh ${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
# generate source blob __________________________________________________
${SRCBLOB}:
	rm -f paw_srcblob paw_srcblob.o
	tar -czf paw_srcblob ${SRCDIR} ${THISDIR}/parms.in_use
ifeq ($(shell uname -s),Linux) 
	ld -r -b binary -o paw_srcblob.o paw_srcblob
endif
ifeq ($(shell uname -s),Darwin)
	touch paw_srcblob_dummy.f90
	${COMPILE} -o paw_srcblob_dummy.o paw_srcblob_dummy.f90
	ld -r -o paw_srcblob.o -sectcreate binary pawsrcblob_bin paw_srcblob paw_srcblob_dummy.o
endif
#
#__general rule for object files_________________________________________
$(OBJECTS) $(LOBJS): ${OBJDIR}/%.o: ${SRCDIR}/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
#__general rule for object files fortran 77______________________________
$(LOBJSF77): ${OBJDIR}/%.o: ${SRCDIR}/%.f
	cp $< ${OBJDIR}/$*_d.f
	$(COMPILE:-fimplicit-none=) -o $@ ${OBJDIR}/$*_d.f
	#${COMPILE} -o $@ ${OBJDIR}/$*_d.f
#
#__compile the tools____________________________________________________
#
${OBJMURNAGHAN}: ${OBJDIR}/%.o : ${TOOLDIR}/Murnaghan/%.f90
#	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	echo doing murnaghan
	cp $< ${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJSTPREPORT}: ${OBJDIR}/%.o : ${TOOLDIR}/Stpa/%.f90
#	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	cp $< ${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJSTPA}: ${OBJDIR}/%.o : ${TOOLDIR}/Stpa/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJTEST}: ${OBJDIR}/%.o : ${TOOLDIR}/Test/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJLATTICE}: ${OBJDIR}/%.o : ${TOOLDIR}/Atomnew/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJNEWATOM}: ${OBJDIR}/%.o : ${TOOLDIR}/Atomnew/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJATOM}: ${OBJDIR}/%.o : ${TOOLDIR}/Atom/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJTRA}: ${OBJDIR}/%.o : ${TOOLDIR}/Tra/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJWAVE}: ${OBJDIR}/%.o : ${TOOLDIR}/Wave/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJ1DAVPOT}: ${OBJDIR}/%.o : ${TOOLDIR}/Wave/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJCMCWAVE}: ${OBJDIR}/%.o : ${TOOLDIR}/Wave/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJGRAB}: ${OBJDIR}/%.o : ${TOOLDIR}/Grab/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJDOS}: ${OBJDIR}/%.o : ${TOOLDIR}/PDoS/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJBANDS}: ${OBJDIR}/%.o : ${TOOLDIR}/Bands/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJPRE}: ${OBJDIR}/%.o : ${TOOLDIR}/Preopt/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJCONVERTTRA}: ${OBJDIR}/%.o : ${TOOLDIR}/Tra/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJCLEANTRA}: ${OBJDIR}/%.o : ${TOOLDIR}/Tra/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJSTRC}: ${OBJDIR}/%.o : ${TOOLDIR}/Strc/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJTOXYZ}: ${OBJDIR}/%.o : ${TOOLDIR}/Strc/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJTOSTRC}: ${OBJDIR}/%.o : ${TOOLDIR}/Strc/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#
${OBJPOLYHEDRA}: ${OBJDIR}/%.o : ${TOOLDIR}/Polyhedra/%.f90
	${F90PP} $< >${OBJDIR}/$*_d.${FEXT}
	${COMPILE} -o $@ ${OBJDIR}/$*_d.${FEXT}
#########################################################################
##  include dependencies through mod files                             ##
#########################################################################
ifeq ($(ALLDEP),T)
 ${OBJDIR}/paw_filehandler.o:   ${OBJDIR}/paw_strings.o
 ${OBJDIR}/paw_linkedlist.o:    ${OBJDIR}/paw_strings.o
 ${OBJDIR}/paw_periodictable.o: ${OBJDIR}/paw_strings.o
 ${OBJDIR}/paw_ioroutines.o:    ${OBJDIR}/paw_strings.o
 ${OBJDIR}/paw_trace.o:         ${OBJDIR}/paw_strings.o
#
 ${OBJDIR}/paw_timing.o:        ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_linkedlist.o:    ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_report.o:        ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_waves1.o:        ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_waves2.o:        ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_augmentation.o:  ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw.o:               ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_constraints.o:   ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_potential.o:     ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_pairpotential.o: ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_isolate.o:       ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_qmmm.o:          ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_thermostat.o:    ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_occupations.o:   ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_ionew.o:         ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_atoms.o:         ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_classical.o:     ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_thermostat.o:    ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_debug.o:         ${OBJDIR}/paw_mpelib${MODE}.o
 ${OBJDIR}/paw_debug.o:          ${OBJDIR}/paw_waves1.o
 ${OBJDIR}/paw_debug.o:          ${OBJDIR}/paw_waves2.o

 ${OBJDIR}/paw_dimer.o:         ${OBJDIR}/paw_mpelib${MODE}.o


 ${OBJDIR}/paw_ldaplusu.o:      ${OBJDIR}/paw_periodictable.o
 ${OBJDIR}/paw_ioroutines.o:    ${OBJDIR}/paw_periodictable.o
 ${OBJDIR}/paw_atomlib.o:       ${OBJDIR}/paw_periodictable.o
 ${OBJDIR}/paw_schroedinger.o:  ${OBJDIR}/paw_periodictable.o

 ${OBJDIR}/paw_ioroutines.o:    ${OBJDIR}/paw_linkedlist.o
 ${OBJDIR}/paw_constraints.o:   ${OBJDIR}/paw_linkedlist.o
 ${OBJDIR}/paw_occupations.o:   ${OBJDIR}/paw_linkedlist.o
 ${OBJDIR}/paw_waves1.o:        ${OBJDIR}/paw_linkedlist.o
 ${OBJDIR}/paw_waves2.o:        ${OBJDIR}/paw_linkedlist.o
 ${OBJDIR}/paw_efg.o:           ${OBJDIR}/paw_linkedlist.o
 ${OBJDIR}/paw_setups.o:        ${OBJDIR}/paw_linkedlist.o

 ${OBJDIR}/paw_atoms.o:         ${OBJDIR}/paw_report.o
 ${OBJDIR}/paw_ionew.o:         ${OBJDIR}/paw_report.o
 ${OBJDIR}/paw_occupations.o:   ${OBJDIR}/paw_report.o
 ${OBJDIR}/paw_qmmm.o:          ${OBJDIR}/paw_report.o
 ${OBJDIR}/paw_classical.o:     ${OBJDIR}/paw_report.o
 ${OBJDIR}/paw_thermostat.o:    ${OBJDIR}/paw_report.o

 ${OBJDIR}/paw_ioroutines.o:    ${OBJDIR}/paw_clock.o
 ${OBJDIR}/paw_ionew.o:         ${OBJDIR}/paw_waves1.o
 ${OBJDIR}/paw_ionew.o:         ${OBJDIR}/paw_waves2.o

 ${OBJDIR}/paw_waves2.o:        ${OBJDIR}/paw_waves1.o

 ${OBJDIR}/paw_cg.o:               ${OBJDIR}/paw_waves1.o

 ${OBJDIR}/paw_ioroutines.o:    ${OBJDIR}/paw_forcefield.o
# ${OBJDIR}/paw_optic.o:		${OBJDIR}/paw_fft.o
# ${OBJDIR}/paw_optic.o:		${OBJDIR}/paw_waves.o
 ${OBJDIR}/paw_qmmm.o:          ${OBJDIR}/paw_report.o

 ${OBJDIR}/paw_dmft.o:          ${OBJDIR}/paw_lmto.o
 ${OBJDIR}/paw_dmft.o:          ${OBJDIR}/paw_waves1.o

 ${OBJDIR}/paw_library.o:      ${OBJDIR}/fftw_f77.i
endif
##########################################################################
#   machine-generated dependencies
#
#   the dependencies are generated by the shell script "finddep"
#   which must be run in the directory where it lies (src/Buildtools/F90PP)
#   the resulting file "dependencies" in that directory is copied here...
###########################################################################
 ## file:src/paw_assist.f90
 DIALS_MODULE.mod : ${OBJDIR}/paw_assist.o
 AUTOPILOT_MODULE.mod : ${OBJDIR}/paw_assist.o
 ## file:src/paw_atomlib.f90
 ${OBJDIR}/paw_atomlib.o : PERIODICTABLE_MODULE.mod
 ## file:src/paw_atoms.f90
 ${OBJDIR}/paw_atoms.o : MPE_MODULE.mod
 ${OBJDIR}/paw_atoms.o : RESTART_INTERFACE.mod
 ATOMS_MODULE.mod : ${OBJDIR}/paw_atoms.o
 ## file:src/paw_augmentation.f90
 ${OBJDIR}/paw_augmentation.o : MPE_MODULE.mod
 AUGMENTATION_MODULE.mod : ${OBJDIR}/paw_augmentation.o
 EXPERTNAL1CPOT_MODULE.mod : ${OBJDIR}/paw_augmentation.o
 ## file:src/paw_brillouin.f90
 BRILLOUIN_MODULE.mod : ${OBJDIR}/paw_brillouin.o
 ## file:src/paw_cell.f90
 ${OBJDIR}/paw_cell.o : RESTART_INTERFACE.mod
 ${OBJDIR}/paw_cell.o : MPE_MODULE.mod
 CELL_MODULE.mod : ${OBJDIR}/paw_cell.o
 ## file:src/paw_cg.f90
 ${OBJDIR}/paw_cg.o : WAVES_MODULE.mod
 ${OBJDIR}/paw_cg.o : MPE_MODULE.mod
 CG_INTERFACE_MODULE.mod : ${OBJDIR}/paw_cg.o
 ## file:src/paw_classical.f90
 ${OBJDIR}/paw_classical.o : MPE_MODULE.mod
 ${OBJDIR}/paw_classical.o : PERIODICTABLE_MODULE.mod
 CLASSICAL_MODULE.mod : ${OBJDIR}/paw_classical.o
 UFFTABLE_MODULE.mod : ${OBJDIR}/paw_classical.o
 ## file:src/paw_clock.f90
 CLOCK_MODULE.mod : ${OBJDIR}/paw_clock.o
 ## file:src/paw_constants.f90
 CONSTANTS_MODULE.mod : ${OBJDIR}/paw_constants.o
 ## file:src/paw_constraints.f90
 ${OBJDIR}/paw_constraints.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_constraints.o : MPE_MODULE.mod
 CONSTRAINTS_MODULE.mod : ${OBJDIR}/paw_constraints.o
 SYMMETRIZE_MODULE.mod : ${OBJDIR}/paw_constraints.o
 ## file:src/paw_cosmo.f90
 ${OBJDIR}/paw_cosmo.o : RESTART_INTERFACE.mod
 ${OBJDIR}/paw_cosmo.o : MPE_MODULE.mod
 ${OBJDIR}/paw_cosmo.o : PERIODICTABLE_MODULE.mod
 COSMO_MODULE.mod : ${OBJDIR}/paw_cosmo.o
 ## file:src/paw_debug.f90
 ${OBJDIR}/paw_debug.o : MPE_MODULE.mod
 ${OBJDIR}/paw_debug.o : WAVES_MODULE.mod
 DEBUG_MODULE.mod : ${OBJDIR}/paw_debug.o
 ## file:src/paw_dftaddendum.f90
 NEWDFT_MODULE.mod : ${OBJDIR}/paw_dftaddendum.o
 ## file:src/paw_dft.f90
 DFT_MODULE.mod : ${OBJDIR}/paw_dft.o
 TABLE1D_MODULE.mod : ${OBJDIR}/paw_dft.o
 EXCHANGE_MODULE.mod : ${OBJDIR}/paw_dft.o
 PERDEWZUNGER_MODULE.mod : ${OBJDIR}/paw_dft.o
 BARTHHEDIN_MODULE.mod : ${OBJDIR}/paw_dft.o
 PERDEW_MODULE.mod : ${OBJDIR}/paw_dft.o
 PERDEWWANG91L_MODULE.mod : ${OBJDIR}/paw_dft.o
 PERDEWWANG91G_MODULE.mod : ${OBJDIR}/paw_dft.o
 PBE_MODULE.mod : ${OBJDIR}/paw_dft.o
 LYP88_MODULE.mod : ${OBJDIR}/paw_dft.o
 ## file:src/paw_dimer.f90
 ${OBJDIR}/paw_dimer.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_dimer.o : MPE_MODULE.mod
 DIMER_MODULE.mod : ${OBJDIR}/paw_dimer.o
 DIMER_OSCILLATOR_MODULE.mod : ${OBJDIR}/paw_dimer.o
 ## file:src/paw_efg.f90
 ${OBJDIR}/paw_efg.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_efg.o : MPE_MODULE.mod
 HYPERFINE_MODULE.mod : ${OBJDIR}/paw_efg.o
 ## file:src/paw_error.f90
 ERROR_MODULE.mod : ${OBJDIR}/paw_error.o
 ## file:src/paw_extpot.f90
 ## file:src/paw.f90
 ${OBJDIR}/paw.o : CLOCK_MODULE.mod
 ${OBJDIR}/paw.o : MPE_MODULE.mod
 VERSION_MODULE.mod : ${OBJDIR}/paw.o
 TIMESTEP_MODULE.mod : ${OBJDIR}/paw.o
 STOPIT_MODULE.mod : ${OBJDIR}/paw.o
 ## file:src/paw_fft.f90
 ${OBJDIR}/paw_fft.o : MPE_MODULE.mod
 PLANEWAVE_MODULE.mod : ${OBJDIR}/paw_fft.o
 ## file:src/paw_filehandler.f90
 ${OBJDIR}/paw_filehandler.o : STRINGS_MODULE.mod
 FILEHANDLER_MODULE.mod : ${OBJDIR}/paw_filehandler.o
 ## file:src/paw_forcefield.f90
 ${OBJDIR}/paw_forcefield.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_forcefield.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_forcefield.o : CLASSICAL_MODULE.mod
 FORCEFIELD_MODULE.mod : ${OBJDIR}/paw_forcefield.o
 ## file:src/paw_generalpurpose.f90
 SORT_MODULE.mod : ${OBJDIR}/paw_generalpurpose.o
 ## file:src/paw_graphics.f90
 ${OBJDIR}/paw_graphics.o : MPE_MODULE.mod
 GRAPHICS_MODULE.mod : ${OBJDIR}/paw_graphics.o
 ## file:src/paw_ionew.f90
 ${OBJDIR}/paw_ionew.o : RESTART_INTERFACE.mod
 ${OBJDIR}/paw_ionew.o : MPE_MODULE.mod
 ${OBJDIR}/paw_ionew.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_ionew.o : TIMESTEP_MODULE.mod
 ## file:src/paw_ioroutines.f90
 ${OBJDIR}/paw_ioroutines.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_ioroutines.o : CLOCK_MODULE.mod
 ${OBJDIR}/paw_ioroutines.o : VERSION_MODULE.mod
 ${OBJDIR}/paw_ioroutines.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_ioroutines.o : MPE_MODULE.mod
 ${OBJDIR}/paw_ioroutines.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_ioroutines.o : FORCEFIELD_MODULE.mod
 IO_MODULE.mod : ${OBJDIR}/paw_ioroutines.o
 ## file:src/paw_iotra.f90
 TRAJECTORYIO_MODULE.mod : ${OBJDIR}/paw_iotra.o
 ## file:src/paw_isolate.f90
 ${OBJDIR}/paw_isolate.o : MPE_MODULE.mod
 ISOLATE_MODULE.mod : ${OBJDIR}/paw_isolate.o
 ## file:src/paw_kpoints.f90
 ## file:src/paw_ldaplusu.f90
 LDAPLUSU_MODULE.mod : ${OBJDIR}/paw_ldaplusu.o
 ${OBJDIR}/paw_ldaplusu.o :  CI_MODULE.mod
 ## file:src/paw_ci.f90
 CI_MODULE.mod : ${OBJDIR}/paw_ci.o
 ## file:src/paw_library.f90
 RANDOM_MODULE.mod : ${OBJDIR}/paw_library.o
 ## file:src/paw_linkedlist.f90
 ${OBJDIR}/paw_linkedlist.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_linkedlist.o : MPE_MODULE.mod
 LLIST_MODULE.mod : ${OBJDIR}/paw_linkedlist.o
 LINKEDLIST_MODULE.mod : ${OBJDIR}/paw_linkedlist.o
 BUFFER_MODULE.mod : ${OBJDIR}/paw_linkedlist.o
 ## file:src/paw_lists.f90
 ENERGYLIST_MODULE.mod : ${OBJDIR}/paw_lists.o
 GROUPLIST_MODULE.mod : ${OBJDIR}/paw_lists.o
 ATOMTYPELIST_MODULE.mod : ${OBJDIR}/paw_lists.o
 ## file:src/paw_lmtobasics.f90
 ${OBJDIR}/paw_lmtobasics.o : STRINGS_MODULE.mod
 ## file:src/paw_lock.f90
 ${OBJDIR}/paw_lock.o : CLOCK_MODULE.mod
 LOCK_MODULE.mod : ${OBJDIR}/paw_lock.o
 ## file:src/paw_md.f90
 ## file:src/paw_mixer.f90
 ${OBJDIR}/paw_mixer.o : MPE_MODULE.mod
 MIXPULAY_MODULE.mod : ${OBJDIR}/paw_mixer.o
 ## file:src/paw_mpelib.f90
 MPI.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_MPIF_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_COMBINE_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_BROADCAST_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_SENDRECEIVE_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_SEND_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_RECEIVE_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_TRANSPOSE_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_GATHER_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 MPE_MODULE.mod : ${OBJDIR}/paw_mpelib${MODE}.o
 ## file:src/paw_occupations.f90
 ${OBJDIR}/paw_occupations.o : RESTART_INTERFACE.mod
 ${OBJDIR}/paw_occupations.o : MPE_MODULE.mod
 ${OBJDIR}/paw_occupations.o : LINKEDLIST_MODULE.mod
 DYNOCC_MODULE.mod : ${OBJDIR}/paw_occupations.o
 OCCUPATION_MODULE.mod : ${OBJDIR}/paw_occupations.o
 ## file:src/paw_optfric.f90
 OPTFRIC_MODULE.mod : ${OBJDIR}/paw_optfric.o
 ## file:src/paw_opteels.f90
 ${OBJDIR}/paw_opteels.o : MPE_MODULE.mod
 ## file:src/paw_pairpotential.f90
 ${OBJDIR}/paw_pairpotential.o : MPE_MODULE.mod
 ## file:src/paw_pdos.f90
 PDOS_MODULE.mod : ${OBJDIR}/paw_pdos.o
 ## file:src/paw_periodictable.f90
 ${OBJDIR}/paw_periodictable.o : STRINGS_MODULE.mod
 PERIODICTABLE_MODULE.mod : ${OBJDIR}/paw_periodictable.o
 ## file:src/paw_polynom.f90
 ## file:src/paw_potential.f90
 ${OBJDIR}/paw_potential.o : MPE_MODULE.mod
 ${OBJDIR}/paw_potential.o : PERIODICTABLE_MODULE.mod
 POTENTIAL_MODULE.mod : ${OBJDIR}/paw_potential.o
 ## file:src/paw_qmmm.f90
 ${OBJDIR}/paw_qmmm.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_qmmm.o : RESTART_INTERFACE.mod
 ${OBJDIR}/paw_qmmm.o : MPE_MODULE.mod
 QMMM_MODULE.mod : ${OBJDIR}/paw_qmmm.o
 ## file:src/paw_radial.f90
 ${OBJDIR}/paw_radial.o : PERIODICTABLE_MODULE.mod
 RADIAL_MODULE.mod : ${OBJDIR}/paw_radial.o
 SHLOGRADIAL_MODULE.mod : ${OBJDIR}/paw_radial.o
 LOGRADIAL_MODULE.mod : ${OBJDIR}/paw_radial.o
 BESSELTRANSFORM_MODULE.mod : ${OBJDIR}/paw_radial.o
 ## file:src/paw_report.f90
 RESTART_INTERFACE.mod : ${OBJDIR}/paw_report.o
 ## file:src/paw_schroedinger.f90
 ## file:src/paw_selftest.f90
 SELFTEST_MODULE.mod : ${OBJDIR}/paw_selftest.o
 ## file:src/paw_setupread.f90
 ${OBJDIR}/paw_setupread.o : LINKEDLIST_MODULE.mod
 SETUPREAD_MODULE.mod : ${OBJDIR}/paw_setupread.o
 ## file:src/paw_setups.f90
 ${OBJDIR}/paw_setups.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_setups.o : LMTO_MODULE.mod
 ${OBJDIR}/paw_setups.o : LINKEDLIST_MODULE.mod
 SETUP_MODULE.mod : ${OBJDIR}/paw_setups.o
 ## file:src/paw_softcore.f90
 CORE_MODULE.mod : ${OBJDIR}/paw_softcore.o
 ## file:src/paw_specialfunctions.f90
 ## file:src/paw_spherical.f90
 CLEBSCH_MODULE.mod : ${OBJDIR}/paw_spherical.o
 SPHERICALCCMAT_MODULE.mod : ${OBJDIR}/paw_spherical.o
 ## file:src/paw_strcio.f90
 ${OBJDIR}/paw_strcio.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_strcio.o : STRINGS_MODULE.mod
 STRCIO_MODULE.mod : ${OBJDIR}/paw_strcio.o
 ## file:src/paw_strings.f90
 STRINGS_MODULE.mod : ${OBJDIR}/paw_strings.o
 ## file:src/paw_thermostat.f90
 ${OBJDIR}/paw_thermostat.o : RESTART_INTERFACE.mod
 ${OBJDIR}/paw_thermostat.o : MPE_MODULE.mod
 THERMOSTAT_MODULE.mod : ${OBJDIR}/paw_thermostat.o
 ## file:src/paw_timing.f90
 ${OBJDIR}/paw_timing.o : MPE_MODULE.mod
 TIMING_MODULE.mod : ${OBJDIR}/paw_timing.o
 ## file:src/paw_trace.f90
 ${OBJDIR}/paw_trace.o : STRINGS_MODULE.mod
 TRACE_MODULE.mod : ${OBJDIR}/paw_trace.o
 ## file:src/paw_usage.f90
 ${OBJDIR}/paw_usage.o : MPE_MODULE.mod
 ## file:src/paw_vdw.f90
 ${OBJDIR}/paw_vdw.o : CONSTANTS_MODULE.mod
 ${OBJDIR}/paw_vdw.o : STRINGS_MODULE.mod
 VDW_MODULE.mod : ${OBJDIR}/paw_vdw.o
 ## file:src/paw_vext.f90
 ${OBJDIR}/paw_vext.o : PERIODICTABLE_MODULE.mod
 VEXT_MODULE.mod : ${OBJDIR}/paw_vext.o
 ## file:src/paw_warmup.f90
 WARMUP_MODULE.mod : ${OBJDIR}/paw_warmup.o
 ## file:src/paw_waves1.f90
 ${OBJDIR}/paw_waves1.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_waves1.o : MPE_MODULE.mod
 WAVES_MODULE.mod : ${OBJDIR}/paw_waves1.o
 ## file:src/paw_waves2.f90
 ${OBJDIR}/paw_waves2.o : MPE_MODULE.mod
 ${OBJDIR}/paw_waves2.o : WAVES_MODULE.mod
 ${OBJDIR}/paw_waves2.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_waves2.o : RESTART_INTERFACE.mod
 WAVESFIXRHO_MODULE.mod : ${OBJDIR}/paw_waves2.o
 TOTALSPIN_MODULE.mod : ${OBJDIR}/paw_waves2.o
 ## file:src/paw_waves_add.f90
 ${OBJDIR}/paw_waves_add.o : WAVES_MODULE.mod
 ${OBJDIR}/paw_waves_add.o : MPE_MODULE.mod
 ## file:src/Tools/Atom/build.f90
 ${OBJDIR}/build.o : STRINGS_MODULE.mod
 ${OBJDIR}/build.o : PERIODICTABLE_MODULE.mod
 ## file:src/Tools/Atom/inboudaryfromkaras.f90
 ## file:src/Tools/Stpa/paw_stpa.f90
 ${OBJDIR}/paw_stpa.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_stpa.o : STRINGS_MODULE.mod
 ## file:src/Tools/Test/paw_test.f90
 ${OBJDIR}/paw_test.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_test.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_test.o : STRINGS_MODULE.mod
 BROYDEN_MODULE.mod : ${OBJDIR}/paw_test.o
 ## file:src/Tools/Atomnew/paw_lattice.f90
 ${OBJDIR}/paw_lattice.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_lattice.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_lattice.o : STRINGS_MODULE.mod
 BROYDEN_MODULE.mod : ${OBJDIR}/paw_lattice.o
 ## file:src/Tools/Atomnew/paw_newatom.f90
 ${OBJDIR}/paw_newatom.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_newatom.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_newatom.o : STRINGS_MODULE.mod
 BROYDEN_MODULE.mod : ${OBJDIR}/paw_newatom.o
 ## file:src/Tools/Atom/paw_atom.f90
 ${OBJDIR}/paw_atom.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_atom.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_atom.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_atom.o : SCHRGL_INTERFACE_MODULE.mod
 GRID.mod : ${OBJDIR}/paw_atom.o
 AEATOM.mod : ${OBJDIR}/paw_atom.o
 PROJECTION.mod : ${OBJDIR}/paw_atom.o
 ## file:src/Tools/Atom/paw_diffgl.f90
 SCHRGL_INTERFACE_MODULE.mod : ${OBJDIR}/paw_diffgl.o
 ## file:src/Tools/Atom/paw_oldradial.f90
 BESSELTRANSFORM_MODULE.mod : ${OBJDIR}/paw_oldradial.o
 ## file:src/Tools/Convertrstrt/paw_iooldrdwrte.f90
 ## file:src/Tools/Convertrstrt/read.f90
 ## file:src/Tools/Grab/paw_grab.f90
 ${OBJDIR}/paw_grab.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_grab.o : STRINGS_MODULE.mod
 SUBSTANCE_MODULE.mod : ${OBJDIR}/paw_grab.o
 READCNTL_MODULE.mod : ${OBJDIR}/paw_grab.o
 ## file:src/Tools/PDoS/paw_dos.f90
 ${OBJDIR}/paw_dos.o : PDOS_MODULE.mod
 ${OBJDIR}/paw_dos.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_dos.o : LINKEDLIST_MODULE.mod
 SPINDIR_MODULE.mod : ${OBJDIR}/paw_dos.o
 ORBITALS_MODULE.mod : ${OBJDIR}/paw_dos.o
 READCNTL_MODULE.mod : ${OBJDIR}/paw_dos.o
 ## file:src/Tools/Bands/paw_bands.f90
 ${OBJDIR}/paw_bands.o : PDOS_MODULE.mod
 ${OBJDIR}/paw_bands.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_bands.o : LINKEDLIST_MODULE.mod
 SPINDIR_MODULE.mod : ${OBJDIR}/paw_bands.o
 ORBITALS_MODULE.mod : ${OBJDIR}/paw_bands.o
 READCNTL_MODULE.mod : ${OBJDIR}/paw_bands.o
 ## file:src/Tools/Preopt/paw_preopt.f90
 ${OBJDIR}/paw_preopt.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_preopt.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_preopt.o : PERIODICTABLE_MODULE.mod
 POPT_MODULE.mod : ${OBJDIR}/paw_preopt.o
 READ_MODULE.mod : ${OBJDIR}/paw_preopt.o
 ## file:src/Tools/Strc/paw_strc.f90
 ${OBJDIR}/paw_strc.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_strc.o : STRINGS_MODULE.mod
 ## file:src/Tools/Strc/paw_tostrc.f90
 ${OBJDIR}/paw_tostrc.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_tostrc.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_tostrc.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_tostrc.o : FORCEFIELD_MODULE.mod
 ## file:src/Tools/Strc/paw_toxyz.f90
 ${OBJDIR}/paw_toxyz.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_toxyz.o : STRINGS_MODULE.mod
 ## file:src/Tools/Strc/paw_tozyz.f90
 ${OBJDIR}/paw_tozyz.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_tozyz.o : STRINGS_MODULE.mod
 ## file:src/Tools/Tra/paw_cleantra.f90
 ${OBJDIR}/paw_cleantra.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_cleantra.o : LINKEDLIST_MODULE.mod
 ## file:src/Tools/Tra/paw_converttra.f90
 ## file:src/Tools/Tra/paw_tra.f90
 ${OBJDIR}/paw_tra.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_tra.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_tra.o : SORT_MODULE.mod
 ${OBJDIR}/paw_tra.o : PERIODICTABLE_MODULE.mod
 ${OBJDIR}/paw_tra.o : FORCEFIELD_MODULE.mod
 TRAJECTORY_MODULE.mod : ${OBJDIR}/paw_tra.o
 ## file:src/Tools/Wave/paw_1davpot.f90
 ## file:src/Tools/Wave/paw_cmcwave.f90
 ## file:src/Tools/Wave/paw_wave.f90
 ${OBJDIR}/paw_wave.o : STRINGS_MODULE.mod
 ${OBJDIR}/paw_wave.o : LINKEDLIST_MODULE.mod
 ${OBJDIR}/paw_wave.o : PERIODICTABLE_MODULE.mod
 ## file:src/Tools/Wave/paw_lmto.f90
##  ${OBJDIR}/paw_lmto.o : ATOMS_MODULE.mod
${OBJDIR}/paw_lmto.o : PERIODICTABLE_MODULE.mod
LMTO_MODULE.mod : ${OBJDIR}/paw_lmto.o
 ## file:src/Tools/Wave/paw_dmft.f90
DMFT_MODULE.mod : ${OBJDIR}/paw_dmft.o
${OBJDIR}/paw_dmft.o : LMTO_MODULE.mod
${OBJDIR}/paw_dmft.o : DMFT_MODULE.mod
${OBJDIR}/paw_dmft.o : WAVES_MODULE.mod
${OBJDIR}/paw_dmft.o : MPE_MODULE.mod
${OBJDIR}/paw_dmft.o : STRINGS_MODULE.mod

